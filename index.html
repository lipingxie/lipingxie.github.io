<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
</head>
<body>
    <div id="top"><img src="./files/Heading.png" alt="" width="600" height="50"></div>
    <div id="data_runningsum"></div>

    <svg width="500" height="400"></svg>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script>
        d3.csv("./data/test.csv", function (data) {
            for (var i = 0; i < data.length; i++) {
                console.log(data[i].TX);
                console.log(data[i].TY);
            }
        });
    </script>
    <script>
        //set data
        var dataset2 = [
            [1, 1], [12, 20], [24, 36],
            [32, 50], [40, 70], [50, 100],
            [55, 106], [65, 123], [73, 130],
            [78, 134], [83, 136], [89, 138],
            [100, 140]
        ];
        //const dataset1 = await d3.csv("C:/Users/sally/Study/DV/project2/lipingxie.github.io/data/test.csv");
        // const dataset1 = await d3.csv("C: \Users\sally\Study\DV\project2\lipingxie.github.io\data");
        var dataset1 = d3.csv("test.csv")
        var svg = d3.select("svg"),
            margin = 200,
            width = svg.attr("width") - margin,
            height = svg.attr("height") - margin

        var xScale = d3.scaleLinear().domain([0, 100]).range([0, width]);
        yScale = d3.scaleLinear().domain([0, 200]).range([height, 0]);

        // Step 5
        // Title
        svg.append('text')
            .attr('x', width / 2 + 100)
            .attr('y', 100)
            .attr('text-anchor', 'middle')
            .style('font-family', 'Helvetica')
            .style('font-size', 20)
            .text('Line Chart');

        // X label
        svg.append('text')
            .attr('x', width / 2 + 100)
            .attr('y', height - 15 + 150)
            .attr('text-anchor', 'middle')
            .style('font-family', 'Helvetica')
            .style('font-size', 12)
            .text('Independant');

        // Y label
        svg.append('text')
            .attr('text-anchor', 'middle')
            .attr('transform', 'translate(60,' + height + ')rotate(-90)')
            .style('font-family', 'Helvetica')
            .style('font-size', 12)
            .text('Dependant');

        //Add axis
        h = height + 100
        svg.append("g")
            .attr("transform", "translate(100," + h + ")")
            .call(d3.axisBottom(xScale));

        svg.append("g")
            .attr("transform", "translate(100,100)")
            .call(d3.axisLeft(yScale));
        //d3.select("svg").append("g").attr("transform", "translate(" + margin + "," + margin + ")").call(d3.axisLeft(yScale));
        //d3.select("svg").append("g").attr("transform", "translate(" + margin + "," + (margin + height) + ")").call(d3.axisBottom(xScale));

        // Scatter dots
        svg.append('g')
            .selectAll("dot")
            .data(dataset1)
            .enter()
            .append("circle")
            //       .attr("cx", function (d) { return xScale(d[0]); } )
            //.attr("cy", function (d) { return yScale(d[1]); })

            .attr("cx", function (d) { return xScale(d.TX); })
            .attr("cy", function (d) { return yScale(d.TY); })
            .attr("r", 2)
            .attr("transform", "translate(" + 100 + "," + 100 + ")")
            .style("fill", "#CC0000");

        // Plot Line
        var line = d3.line()
            .x(function (d) { return xScale(d.TX); })
            .y(function (d) { return yScale(d.TY); })
            .curve(d3.curveMonotoneX)

        svg.append("path")
            .datum(dataset1)
            .attr("class", "line")
            .attr("transform", "translate(" + 100 + "," + 100 + ")")
            .attr("d", line)
            .style("fill", "none")
            .style("stroke", "#CC0000")
            .style("stroke-width", "2");
                        /*
// set the dimensions and margins of the graph
var margin = { top: 10, right: 30, bottom: 30, left: 60 },
width = 460 - margin.left - margin.right,
height = 400 - margin.top - margin.bottom;

// append the svg object to the body of the page
var svg = d3.select("#data_runningsum")
.append("svg")
.attr("width", width + margin.left + margin.right)
.attr("height", height + margin.top + margin.bottom)
.append("g")
.attr("transform",
"translate(" + margin.left + "," + margin.top + ")");

//Read the data
case_data = d3.csv("./data/test.csv"),

// When reading the csv, I must format variables:
function (d) {
return { date: d3.timeParse("%Y-%m-%d")(d.date), value: d.value }
},

// Now I can use this dataset:
function (data) {

// Add X axis --> it is a date format
var x = d3.scaleTime()
.domain(d3.extent(data, function (d) { return d.date; }))
.range([0, width]);
svg.append("g")
.attr("transform", "translate(0," + height + ")")
.call(d3.axisBottom(x));

// Add Y axis
var y = d3.scaleLinear()
.domain([0, d3.max(data, function (d) { return +d.value; })])
.range([height, 0]);
svg.append("g")
.call(d3.axisLeft(y));

// Add the line
svg.append("path")
.datum(data)
.attr("fill", "none")
.attr("stroke", "steelblue")
.attr("stroke-width", 1.5)
.attr("d", d3.line()
.x(function (d) { return x(d.date) })
.y(function (d) { return y(d.value) })
)

}
*/
    </script>

</body>
</html>

